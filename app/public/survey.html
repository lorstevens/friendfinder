<html>
<head>


	<meta charset="UTF-8">
	<title>Find a Friend!</title>
	  <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<!--       <script type="text/javascript" src="js/materialize.min.js"></script> -->

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
  	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
  	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
          

</head>
<body>



<div class="container">
	<div class="row">
	

		<h1 class="center-align"><span class="teal-text text-lighten-2"><i class="large material-icons">person</i>Friend Survey</span></h1>
		<div class="divider"></div>

		<div class="input-field col s6">
			<h5>Name (Required)</h5>
			<input type="text" class="validate" id="name">
		</div>

		<div class="input-field col s6">
			<h5>Link to Photo Image (Required)</h5>
			<input type="text" class="validate" id="photo">
		</div>
<br><br>

	<div row>
		<h5>1. You think the movie Grease is the worst.</h5>
		<select class="browser-default" id= "q1">
			<option value="" disabled selected>Choose your option</option>
			<option value="1">1 (Strongly disagree)</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5 (Strongly agree)</option>
		</select>
	</div><br>

	<div row>
		<h5>2. You enjoy a Gin and Tonic from time to time.</h5>
		<select class="browser-default" id= "q2">
			<option value="" disabled selected>Choose your option</option>
			<option value="1">1 (Strongly disagree)</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5 (Strongly agree)</option>
		</select>
	</div><br>

	<div row>
		<h5>3. You would rather watch Gossip Girl.</h5>
		<select class="browser-default" id= "q3">
			<option value="" disabled selected>Choose your option</option>
			<option value="1">1 (Strongly disagree)</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5 (Strongly agree)</option>
		</select>
	</div><br>

	<div row>
		<h5>4. You like the beach more than the mountains.</h5>
		<select class="browser-default" id= "q4">
			<option value="" disabled selected>Choose your option</option>
			<option value="1">1 (Strongly disagree)</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5 (Strongly agree)</option>
		</select>
	</div><br>

	<div row>
		<h5>5. You never wear matching socks.</h5>
		<select class="browser-default" id= "q5">
			<option value="" disabled selected>Choose your option</option>
			<option value="1">1 (Strongly disagree)</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5 (Strongly agree)</option>
		</select>
	</div><br>

	<div row>
		<h5>6. You're cool with listening to Abba.</h5>
		<select class="browser-default" id= "q6">
			<option value="" disabled selected>Choose your option</option>
			<option value="1">1 (Strongly disagree)</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5 (Strongly agree)</option>
		</select>
	</div><br>

	<div row>
		<h5>7. You're not annoying</h5>
		<select class="browser-default" id= "q7">
			<option value="" disabled selected>Choose your option</option>
			<option value="1">1 (Strongly disagree)</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5 (Strongly agree)</option>
		</select>
	</div><br>

	<div row>
		<h5>8. You like reading historical fiction.</h5>
		<select class="browser-default" id= "q8">
			<option value="" disabled selected>Choose your option</option>
			<option value="1">1 (Strongly disagree)</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5 (Strongly agree)</option>
		</select>
	</div><br>

	<div row>
		<h5>9. You put hot sauce on everything.</h5>
		<select class="browser-default" id= "q9">
			<option value="" disabled selected>Choose your option</option>
			<option value="1">1 (Strongly disagree)</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5 (Strongly agree)</option>
		</select>
	</div><br>

	<div row>
		<h5>10. You eat icecream sandwiches.</h5>
		<select class="browser-default" id= "q10">
			<option value="" disabled selected>Choose your option</option>
			<option value="1">1 (Strongly disagree)</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5 (Strongly agree)</option>
		</select>
	</div>

	<br><br>
		

	<button type="submit" class="btn btn-primary btn-lg btn-block btn-center" id="submit">Submit, new friend!</button>


	<br><br>

    <footer class="footer">
	        <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/lorstevens/friendfinder">GitHub Repo</a></p>
    </footer>


</div>
</div>
</body>


	<div id="modal1" class="modal">
		<div class="modal-content">
			<h4>Closest Friend Match</h4>
			<h5 id="userMatch"></h5>
			<img id="userMatchImage" class="materialboxed" width="650" src="">
		</div>
		<div class="modal-footer">
			<a href="/survey" class="modal-action modal-close waves-effect waves-green btn-flat">Fill Again!</a>
			<a href="/" class="modal-action modal-close waves-effect waves-green btn-flat">Exit</a>
		</div>
	</div>


<script type="text/javascript">

    $("#submit").on("click", function(event) {
      event.preventDefault();

     

var heyFriend = {
				name: $('#name').val().trim(),
				photo: $('#photo').val().trim(),
				scores:[
					$('#q1').val(),
					$('#q2').val(),
					$('#q3').val(),
					$('#q4').val(),
					$('#q5').val(),
					$('#q6').val(),
					$('#q7').val(),
					$('#8').val(),
					$('#q9').val(),
					$('#q10').val()
				]
			};

// $('#modal1').modal('open');

      var currentURL = window.location.origin;

//this is AJAX
      $.post(currentURL + "/api/friends", heyFriend, function(data){

		    	// // Pop open the modal dialog
      	// 		$('#modal1').modal('open');

      })
      .done(function(data){
      	$('#userMatch').html("Meet your new bud: " + data.name);

      	console.log(data.name)

		$("#userMatchImage").attr("src", data.photo);
      	$('#modal1').modal();
      	$("#modal1").modal('open'); 

    });
  })


  </script>

</html>